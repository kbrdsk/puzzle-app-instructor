(this["webpackJsonpinstructor-app"]=this["webpackJsonpinstructor-app"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(2),a=n.n(c),s=n(4),u=n(3),i=n(0),o=n(1),l=n.n(o),p=n(11),j=n.n(p),v=n(7);function d(e){var t=e.students,n=Object(o.useState)(t),c=Object(u.a)(n,2),a=c[0],s=c[1];return Object(i.jsxs)("div",{className:"student-list-container",children:[Object(i.jsx)(f,Object(r.a)(Object(r.a)({},e),{},{setDisplayedStudents:s})),Object(i.jsx)("input",{type:"text",placeholder:"Filter",onChange:function(e){var n=e.target.value.split(" "),r=t.filter((function(e){var t=e.first,r=e.last;return n.every((function(e){var n=new RegExp(e,"i");return t.match(n)||r.match(n)}))}));s(r)}}),Object(i.jsx)("ul",{className:"student-list",children:a.map(h.bind(null,e))})]})}function f(e){var t=e.students,n=e.setStudents,r=e.setDisplayedStudents,c=function(){var e=Object(s.a)(a.a.mark((function e(){var c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat("https://immense-everglades-63113.herokuapp.com/api","/students"),e.next=3,fetch(c,{headers:{authorization:"testingpw"}});case 3:if(!(s=e.sent).ok){e.next=18;break}return e.prev=5,e.next=8,s.json();case 8:u=e.sent.map((function(e){return t.find((function(t){var n=t.first,r=t.last;return n===e.first&&r===e.last}))||e})),n(u),r(u),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:e.next=19;break;case 18:console.log("HTTP error, status = "+s.status);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)("button",{className:"refresh-students",onClick:c,children:"Refresh"})}function h(e,t){var n=e.students,r=e.setStudents,c=t.first,a=t.last,s=t.active;return Object(i.jsxs)("li",{children:[b(c)," ",b(a)," ",Object(i.jsx)("input",{type:"checkbox",name:"active",id:"".concat(c,"_").concat(a,"-active"),defaultChecked:!!s,onChange:function(){t.active=!s,r(Object(v.a)(n))}})]},"".concat(c," ").concat(a))}function b(e){return e.replace(/^./,(function(e){return e.toUpperCase()}))}var m=n(10);function O(e){var t=e.data,n=t.size,r=function(e){var t=e.size,n=e.cages,r=e.work;return Array(Math.pow(t,2)).fill(null).map((function(){for(var e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];var s=c[1],u=Math.floor(s/t),i=s%t,o=x({col:u,row:i}),l=r.find(o),p=n.find((function(e){return e.squares.find(o)})),j=z({col:u,row:i},p),v=p.squares.every((function(e){return e.col>=u&&(e.row>=i||e.col>u)})),d=v?p.result:null,f=v?p.operation:null,h=l?l.value:null;return{col:u,row:i,value:h,neighbors:j,result:d,operation:f}}))}(t);return Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"puzzle-container",size:n,children:Object(i.jsx)("div",{className:"grid-container",size:n,children:r.map(w)})})})}function w(e){var t="calcudoku-square "+e.neighbors.join(" ");return Object(i.jsxs)("div",{className:t,children:[Object(i.jsxs)("div",{className:"cage-indicator",children:[e.result,e.operation]}),Object(i.jsx)("input",{type:"number",value:e.value||"",disabled:!0})]})}function z(e,t){var n=[],r={"n-up":{col:e.col-1,row:e.row},"n-down":{col:e.col+1,row:e.row},"n-left":{col:e.col,row:e.row-1},"n-right":{col:e.col,row:e.row+1}};for(var c in r){var a=x(r[c]);t.squares.find(a)&&n.push(c)}return n}function x(e){var t=e.col,n=e.row;return function(e){return e.col===t&&e.row===n}}function g(e){var t=e.data,n=t.description,r=t.work;return Object(i.jsxs)("div",{className:"logic",children:[Object(i.jsx)("p",{className:"description",children:n}),Object(i.jsx)("p",{className:"work",children:r})]})}function k(e){var t=e.data,n=t.work,r=Object(o.useState)(t.workPosition||0),c=Object(u.a)(r,2),a=c[0],s=c[1],l=t.size,p=l.cols,j=l.rows,v=t.beginstate,d=t.neighborType,f=function(e){var t=e.row,n=e.col;switch(d){case"x":return[{row:t-1,col:n-1},{row:t+1,col:n+1},{row:t+1,col:n-1},{row:t-1,col:n+1},{row:t,col:n}];default:return[{row:t-1,col:n},{row:t+1,col:n},{row:t,col:n-1},{row:t,col:n+1},{row:t,col:n}]}},h=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),c=1;c<t;c++)r[c-1]=arguments[c];var s=r[1],u=f({row:e,col:s}),o=n.slice(0,a).filter((function(e){return u.some(N(e))})),l=(o.length+(v.some(N({row:e,col:s}))?1:0))%2>0,p="light-square ".concat(l?"active":"inactive");return Object(i.jsx)("div",{className:p})},b=function(e){return s(e)};return Object(i.jsxs)("div",{className:"light-puzzle-container",children:[Object(i.jsx)("div",{className:"light-grid",cols:p,rows:j,children:new Array(j).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return Object(i.jsx)("div",{className:"grid-row",children:Array(p).fill(null).map(h.bind(null,r))})}))}),Object(i.jsxs)("div",{className:"controller",children:[Object(i.jsx)(q,{jump:function(){return b(0)},isactive:a>0}),Object(i.jsx)(y,{step:function(){return b(Math.max(a-1,0))},isactive:a>0}),Object(i.jsx)(S,{step:function(){return b(Math.min(a+1,n.length))},isactive:a<n.length}),Object(i.jsx)(I,{jump:function(){return b(n.length)},isactive:a<n.length})]})]})}function N(e){var t=e.row,n=e.col;return function(e){return e.col===n&&e.row===t}}function y(e){var t=e.step,n=e.isactive;return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"step back nav-button",isactive:n.toString(),children:Object(i.jsx)("path",{d:"M1344 576v896q0 26-19 45t-45 19-45-19l-448-448q-19-19-19-45t19-45l448-448q19-19 45-19t45 19 19 45z"})})}function q(e){var t=e.jump,n=e.isactive;return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"jump back nav-button",isactive:n.toString(),children:Object(i.jsx)("path",{d:"M1811 269q19-19 32-13t13 32v1472q0  26-13 32t-32-13l-710-710q-8-9-13-19v710q0  26-13 32t-32-13l-710-710q-19-19-19-45t19-45l710-710q19-19  32-13t13 32v710q5-11 13-19z"})})}function S(e){var t=e.step,n=e.isactive;return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"step forward nav-button",isactive:n.toString(),children:Object(i.jsx)("path",{d:"M1280 1024q0 26-19 45l-448 448q-19 19-45  19t-45-19-19-45v-896q0-26 19-45t45-19 45  19l448 448q19 19 19 45z"})})}function I(e){var t=e.jump,n=e.isactive;return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"jump forward nav-button",isactive:n.toString(),children:Object(i.jsx)("path",{d:"M237 1779q-19 19-32 13t-13-32v-1472q0-26 13-32t32 13l710  710q8 8 13 19v-710q0-26 13-32t32 13l710 710q19 19 19 45t-19  45l-710 710q-19 19-32 13t-13-32v-710q-5 10-13 19z"})})}var M={calcudoku:function(e){return Object(i.jsx)(O,{data:e})},logic:function(e){return Object(i.jsx)(g,{data:e})},light:function(e){return Object(i.jsx)(k,{data:e})}},C={activepuzzle:!0,puzzleName:"calcudoku",puzzleId:"4x4beginner1"};function D(e){var t=Object(o.useState)(new Map),n=Object(u.a)(t,2),c=n[0],l=n[1],p=Object(o.useState)(new Map),j=Object(u.a)(p,2),d=j[0],f=j[1],h=Object(o.useState)(new Map),b=Object(u.a)(h,2),O=b[0],w=b[1],z=Object(o.useMemo)((function(){return e.students.filter((function(e){return e.active}))}),[e.students]);Object(o.useEffect)((function(){f((function(t){var n=new Map(t);return e.students.forEach((function(e){n.has(e)||n.set(e,C)})),n}))}),[e.students,f]);var x=Object(o.useCallback)(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,c,s,u,i,o,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first,r=t.last,c=d.get(t),s=c.activepuzzle,u=c.puzzleName,i=c.puzzleId,o=s?"activepuzzle":"".concat(u,"/").concat(i),l="https://immense-everglades-63113.herokuapp.com/api"+"/students/".concat(n,"_").concat(r,"/").concat(o),e.next=6,fetch(l,{headers:{authorization:"testingpw"}});case 6:return p=e.sent,e.next=9,p.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d]),g=Object(o.useCallback)(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,c,s,u,i,o,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first,c=t.last,s="https://immense-everglades-63113.herokuapp.com/api"+"/students/".concat(n,"_").concat(c,"/activepuzzle"),e.next=4,fetch(s,{headers:{authorization:"testingpw"}});case 4:return u=e.sent,e.next=7,u.json();case 7:if(i=e.sent,o=i.puzzleName,l=i.puzzleId,p=Object(m.a)(i,["puzzleName","puzzleId"]),o){e.next=13;break}return e.abrupt("return");case 13:w((function(e){var n=e.get(t)||{},c=n[o]||{},a=c[l]||[];if(!a[0]||JSON.stringify(Object(r.a)({puzzleId:l},p))!==JSON.stringify(a[0].data)){c[l]=[{data:Object(r.a)({puzzleId:l},p),timestamp:Date.now()}].concat(Object(v.a)(a)),n[o]=c;var s=new Map(e);return s.set(t,n),s}return e}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[w]),k=Object(o.useCallback)(Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(z.map(function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(t),e.next=3,x(t);case 3:return n=e.sent,e.abrupt("return",[t,n]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:t=e.sent,l((function(e){var n=new Map(e);return t.forEach((function(e){return n.set.apply(n,Object(v.a)(e))})),n})),console.log("refreshed");case 5:case"end":return e.stop()}}),e)}))),[z,l,x,g]);Object(o.useEffect)((function(){k();var e=setInterval(k,1e3);return function(){return clearInterval(e)}}),[k]);var N=function(t,n,c){var a=Object(r.a)({},d.get(t));a[n]=c,"puzzleName"===n&&(a.puzzleId=e.puzzleDirectory[c][0]);var s=new Map(d);s.set(t,a),f(s)},y=function(e){var t=c.get(e)||{},n=t.puzzleName,r=Object(m.a)(t,["puzzleName"]),a=M[n];return a?a(r):null},q=function(e){var t=O.get(e);if(!t)return null;var n=e.first,r=e.last,c=Object.keys(t).flatMap((function(e){return Object.keys(t[e]).map((function(n){var r=t[e][n][0],c=r.data.puzzleId,a=r.timestamp;return{puzzleName:e,puzzleId:c,timestamp:a}}))})).sort((function(e,t){return e.timestamp>t.timestamp?-1:1}));return Object(i.jsx)("select",{name:"history-select",className:"history-select",id:"history-".concat(n,"-").concat(r),onChange:function(t){var n=JSON.parse(t.target.value),r=n.puzzleName,c=n.puzzleId;N(e,"puzzleName",r),N(e,"puzzleId",c)},children:c.map((function(e){var t=e.puzzleName,n=e.puzzleId,r=e.timestamp,c=new Date(r).toLocaleTimeString();return Object(i.jsxs)("option",{value:JSON.stringify({puzzleName:t,puzzleId:n}),children:[n," ",c]})}))})},S=function(t){var n=e.puzzleDirectory,r=d.get(t),c=r.puzzleName,a=r.puzzleId,s=c?n[c]:[];return Object(i.jsxs)("div",{className:"puzzle-select",children:[Object(i.jsx)("select",{name:"type-select",id:"type-select",value:c,onChange:function(e){return N(t,"puzzleName",e.target.value)},children:Object.keys(n).map((function(e){return Object(i.jsx)("option",{value:e,children:e})}))}),Object(i.jsx)("select",{name:"instance-select",id:"instance-select",value:a,onChange:function(e){return N(t,"puzzleId",e.target.value)},children:s.map((function(e){return Object(i.jsx)("option",{value:e,children:e})}))}),q(t)]})},I=function(e){var t=O.get(e)||{};return Object.keys(t).some((function(e){return Object.keys(t[e]).some((function(n){var r=t[e][n][0].timestamp;return Date.now()-r<6e4}))}))};return Object(i.jsx)("ul",{className:"puzzle-display",children:z.map((function(e){var t=e.first,n=e.last,r=d.get(e),c=r?r.activepuzzle:null;return Object(i.jsxs)("li",{children:[Object(i.jsxs)("div",{className:"student-header",children:[Object(i.jsxs)("div",{className:"student-name",children:[Object(i.jsxs)("span",{className:"name",children:[A(t)," ",A(n)]}),Object(i.jsx)("span",{className:"activity-indicator",children:I(e)?null:"Inactive"})]}),Object(i.jsxs)("div",{children:["Show Active Puzzle:",Object(i.jsx)("input",{type:"checkbox",name:"active",id:"".concat(t,"_").concat(n,"-active"),checked:!!c,onChange:function(){return N(e,"activepuzzle",!c)}})]}),c?null:S(e)]}),y(e)]},"".concat(t,"_").concat(n))}))})}function A(e){return e.replace(/^./,(function(e){return e.toUpperCase()}))}n(18);function E(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(o.useState)({calcudoku:[],logic:[],light:[]}),p=Object(u.a)(l,2),j=p[0],v=p[1];return Object(o.useEffect)((function(){Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(Object.keys(j).map(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://immense-everglades-63113.herokuapp.com/api","/puzzles/").concat(t),e.next=3,fetch(n,{headers:{authorization:"testingpw"}});case 3:if(!(r=e.sent).ok){e.next=10;break}return e.next=7,r.json();case 7:j[t]=e.sent.map((function(e){return e.instance})),e.next=11;break;case 10:console.log("Http error: ".concat(r.status));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:v(Object(r.a)({},j)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}),[]),Object(i.jsxs)("div",{className:"app",children:[Object(i.jsx)(d,{students:n,setStudents:c}),Object(i.jsx)(D,{students:n,puzzleDirectory:j})]})}j.a.render(Object(i.jsx)(l.a.StrictMode,{children:Object(i.jsx)(E,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.af1ec820.chunk.js.map