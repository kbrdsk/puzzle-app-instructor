(this["webpackJsonpinstructor-app"]=this["webpackJsonpinstructor-app"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(2),a=n.n(c),s=n(3),u=n(4),o=n(0),i=n(1),l=n.n(i),p=n(10),d=n.n(p),f=n(8);function j(e){var t=e.students,n=Object(i.useState)(t),c=Object(u.a)(n,2),a=c[0],s=c[1];return Object(o.jsxs)("div",{className:"student-list-container",children:[Object(o.jsx)(v,Object(r.a)(Object(r.a)({},e),{},{setDisplayedStudents:s})),Object(o.jsx)("input",{type:"text",placeholder:"Filter",onChange:function(e){var n=e.target.value.split(" "),r=t.filter((function(e){var t=e.first,r=e.last;return n.every((function(e){var n=new RegExp(e,"i");return t.match(n)||r.match(n)}))}));s(r)}}),Object(o.jsx)("ul",{className:"student-list",children:a.map(b.bind(null,e))})]})}function v(e){var t=e.students,n=e.setStudents,r=e.setDisplayedStudents,c=function(){var e=Object(s.a)(a.a.mark((function e(){var c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat("https://immense-everglades-63113.herokuapp.com/api","/students"),e.next=3,fetch(c,{headers:{authorization:"testingpw"}});case 3:if(!(s=e.sent).ok){e.next=18;break}return e.prev=5,e.next=8,s.json();case 8:u=e.sent.map((function(e){return t.find((function(t){var n=t.first,r=t.last;return n===e.first&&r===e.last}))||e})),n(u),r(u),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:e.next=19;break;case 18:console.log("HTTP error, status = "+s.status);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)("button",{className:"refresh-students",onClick:c,children:"Refresh"})}function b(e,t){var n=e.students,r=e.setStudents,c=t.first,a=t.last,s=t.active;return Object(o.jsxs)("li",{children:[h(c)," ",h(a)," ",Object(o.jsx)("input",{type:"checkbox",name:"active",id:"".concat(c,"_").concat(a,"-active"),defaultChecked:!!s,onChange:function(){t.active=!s,r(Object(f.a)(n))}})]},"".concat(c," ").concat(a))}function h(e){return e.replace(/^./,(function(e){return e.toUpperCase()}))}var O=n(11);function x(e){var t=e.data,n=t.size,r=function(e){var t=e.size,n=e.cages,r=e.work;return Array(Math.pow(t,2)).fill(null).map((function(){for(var e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];var s=c[1],u=Math.floor(s/t),o=s%t,i=w({col:u,row:o}),l=r.find(i),p=n.find((function(e){return e.squares.find(i)})),d=z({col:u,row:o},p),f=p.squares.every((function(e){return e.col>=u&&(e.row>=o||e.col>u)})),j=f?p.result:null,v=f?p.operation:null,b=l?l.value:null;return{col:u,row:o,value:b,neighbors:d,result:j,operation:v}}))}(t);return Object(o.jsx)("div",{children:Object(o.jsx)("div",{className:"puzzle-container",size:n,children:Object(o.jsx)("div",{className:"grid-container",size:n,children:r.map(m)})})})}function m(e){var t="calcudoku-square "+e.neighbors.join(" ");return Object(o.jsxs)("div",{className:t,children:[Object(o.jsxs)("div",{className:"cage-indicator",children:[e.result,e.operation]}),Object(o.jsx)("input",{type:"number",value:e.value||"",disabled:!0})]})}function z(e,t){var n=[],r={"n-up":{col:e.col-1,row:e.row},"n-down":{col:e.col+1,row:e.row},"n-left":{col:e.col,row:e.row-1},"n-right":{col:e.col,row:e.row+1}};for(var c in r){var a=w(r[c]);t.squares.find(a)&&n.push(c)}return n}function w(e){var t=e.col,n=e.row;return function(e){return e.col===t&&e.row===n}}function g(e){var t=e.data,n=t.description,r=t.work;return Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:"puzzle-description",children:n}),Object(o.jsx)("textarea",{className:"work",disabled:!0,children:r})]})}var k={calcudoku:function(e){return Object(o.jsx)(x,{data:e})},logic:function(e){return Object(o.jsx)(g,{data:e})}},y={activepuzzle:!0,puzzleName:"calcudoku",puzzleId:"4x4beginner1"};function N(e){var t=Object(i.useState)(new Map),n=Object(u.a)(t,2),c=n[0],l=n[1],p=Object(i.useState)(new Map),d=Object(u.a)(p,2),j=d[0],v=d[1],b=Object(i.useMemo)((function(){return e.students.filter((function(e){return e.active}))}),[e.students]);Object(i.useEffect)((function(){v((function(t){var n=new Map(t);return e.students.forEach((function(e){n.has(e)||n.set(e,y)})),n}))}),[e.students,v]);var h=Object(i.useCallback)(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,c,s,u,o,i,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first,r=t.last,c=j.get(t),s=c.activepuzzle,u=c.puzzleName,o=c.puzzleId,i=s?"activepuzzle":"".concat(u,"/").concat(o),l="https://immense-everglades-63113.herokuapp.com/api"+"/students/".concat(n,"_").concat(r,"/").concat(i),e.next=6,fetch(l,{headers:{authorization:"testingpw"}});case 6:return p=e.sent,e.next=9,p.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j]);Object(i.useEffect)((function(){Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(b.map(function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:return n=e.sent,e.abrupt("return",[t,n]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:t=e.sent,l((function(e){var n=new Map(e);return t.forEach((function(e){return n.set.apply(n,Object(f.a)(e))})),n})),console.log("refreshed");case 5:case"end":return e.stop()}}),e)})))()}),[b,l,h]);var x=function(t,n,c){var a=Object(r.a)({},j.get(t));a[n]=c,"puzzleName"===n&&(a.puzzleId=e.puzzleDirectory[c][0]);var s=new Map(j);s.set(t,a),v(s)},m=function(e){var t=c.get(e)||{},n=t.puzzleName,r=Object(O.a)(t,["puzzleName"]),a=k[n];return a?a(r):null},z=function(t){var n=e.puzzleDirectory,r=j.get(t),c=r.puzzleName,a=r.puzzleId,s=c?n[c]:[];return Object(o.jsxs)("div",{className:"puzzle-select",children:[Object(o.jsx)("select",{name:"type-select",id:"type-select",value:c,onChange:function(e){return x(t,"puzzleName",e.target.value)},children:Object.keys(n).map((function(e){return Object(o.jsx)("option",{value:e,children:e})}))}),Object(o.jsx)("select",{name:"instance-select",id:"instance-select",value:a,onChange:function(e){return x(t,"puzzleId",e.target.value)},children:s.map((function(e){return Object(o.jsx)("option",{value:e,children:e})}))})]})};return Object(o.jsx)("ul",{className:"puzzle-display",children:b.map((function(e){var t=e.first,n=e.last,r=j.get(e),c=r?r.activepuzzle:null;return Object(o.jsxs)("li",{children:[Object(o.jsxs)("div",{className:"student-header",children:[Object(o.jsxs)("span",{className:"student-name",children:[S(t)," ",S(n)]}),Object(o.jsx)("input",{type:"checkbox",name:"active",id:"".concat(t,"_").concat(n,"-active"),checked:!!c,onChange:function(){return x(e,"activepuzzle",!c)}}),c?null:z(e)]}),m(e)]},"".concat(t,"_").concat(n))}))})}function S(e){return e.replace(/^./,(function(e){return e.toUpperCase()}))}n(18);function C(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(i.useState)({calcudoku:[],logic:[]}),p=Object(u.a)(l,2),d=p[0],f=p[1];return Object(i.useEffect)((function(){Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(Object.keys(d).map(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://immense-everglades-63113.herokuapp.com/api","/puzzles/").concat(t),e.next=3,fetch(n,{headers:{authorization:"testingpw"}});case 3:if(!(r=e.sent).ok){e.next=10;break}return e.next=7,r.json();case 7:d[t]=e.sent.map((function(e){return e.instance})),e.next=11;break;case 10:console.log("Http error: ".concat(r.status));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:f(Object(r.a)({},d)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}),[]),Object(o.jsxs)("div",{className:"app",children:[Object(o.jsx)(j,{students:n,setStudents:c}),Object(o.jsx)(N,{students:n,puzzleDirectory:d})]})}d.a.render(Object(o.jsx)(l.a.StrictMode,{children:Object(o.jsx)(C,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.f15d642d.chunk.js.map