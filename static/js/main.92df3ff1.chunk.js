(this["webpackJsonpinstructor-app"]=this["webpackJsonpinstructor-app"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(0),c=n(1),s=n.n(c),i=n(12),u=n.n(i),o=n(7),l=n(2),p=n.n(l),d=n(4),f=n(5);function j(e){var t=e.students,n=Object(c.useState)(t),s=Object(r.a)(n,2),i=s[0],u=s[1];return Object(a.jsxs)("div",{className:"student-list-container",children:[Object(a.jsx)(v,Object(f.a)(Object(f.a)({},e),{},{setDisplayedStudents:u})),Object(a.jsx)("input",{type:"text",placeholder:"Filter",onChange:function(e){var n=e.target.value.split(" "),r=t.filter((function(e){var t=e.first,r=e.last;return n.every((function(e){var n=new RegExp(e,"i");return t.match(n)||r.match(n)}))}));u(r)}}),Object(a.jsx)("ul",{className:"student-list",children:i.map(h.bind(null,e))})]})}function v(e){var t=e.students,n=e.setStudents,r=e.setDisplayedStudents,c=function(){var e=Object(d.a)(p.a.mark((function e(){var a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://immense-everglades-63113.herokuapp.com/api","/students"),e.next=3,fetch(a,{headers:{authorization:"testingpw"}});case 3:if(!(c=e.sent).ok){e.next=18;break}return e.prev=5,e.next=8,c.json();case 8:s=e.sent.map((function(e){return t.find((function(t){var n=t.first,r=t.last;return n===e.first&&r===e.last}))||e})),n(s),r(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:e.next=19;break;case 18:console.log("HTTP error, status = "+c.status);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("button",{className:"refresh-students",onClick:c,children:"Refresh"})}function h(e,t){var n=e.students,r=e.setStudents,c=t.first,s=t.last,i=t.active;return Object(a.jsxs)("li",{children:[b(c)," ",b(s)," ",Object(a.jsx)("input",{type:"checkbox",name:"active",id:"".concat(c,"_").concat(s,"-active"),defaultChecked:!!i,onChange:function(){t.active=!i,r(Object(o.a)(n))}})]},"".concat(c," ").concat(s))}function b(e){return e.replace(/^./,(function(e){return e.toUpperCase()}))}var m=n(11);function x(e){var t=e.data,n=t.size,r=function(e){var t=e.size,n=e.cages,r=e.work;return Array(Math.pow(t,2)).fill(null).map((function(){for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];var s=a[1],i=Math.floor(s/t),u=s%t,o=g({col:i,row:u}),l=r.find(o),p=n.find((function(e){return e.squares.find(o)})),d=w({col:i,row:u},p),f=p.squares.every((function(e){return e.col>=i&&(e.row>=u||e.col>i)})),j=f?p.result:null,v=f?p.operation:null,h=l?l.value:null;return{col:i,row:u,value:h,neighbors:d,result:j,operation:v}}))}(t);return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"puzzle-container",size:n,children:Object(a.jsx)("div",{className:"grid-container",size:n,children:r.map(O)})})})}function O(e){var t="calcudoku-square "+e.neighbors.join(" ");return Object(a.jsxs)("div",{className:t,children:[Object(a.jsxs)("div",{className:"cage-indicator",children:[e.result,e.operation]}),Object(a.jsx)("input",{type:"number",value:e.value||"",disabled:!0})]})}function w(e,t){var n=[],r={"n-up":{col:e.col-1,row:e.row},"n-down":{col:e.col+1,row:e.row},"n-left":{col:e.col,row:e.row-1},"n-right":{col:e.col,row:e.row+1}};for(var a in r){var c=g(r[a]);t.squares.find(c)&&n.push(a)}return n}function g(e){var t=e.col,n=e.row;return function(e){return e.col===t&&e.row===n}}function z(e){var t=e.data,n=t.description,r=t.work;return Object(a.jsxs)("div",{className:"logic",children:[Object(a.jsx)("p",{className:"description",children:n}),Object(a.jsx)("p",{className:"work",children:r})]})}function k(e){var t=e.data,n=t.work,s=Object(c.useState)(t.workPosition||0),i=Object(r.a)(s,2),u=i[0],o=i[1],l=t.size,p=l.cols,d=l.rows,f=t.beginstate,j=t.neighborType,v=function(e){var t=e.row,n=e.col;switch(j){case"x":return[{row:t-1,col:n-1},{row:t+1,col:n+1},{row:t+1,col:n-1},{row:t-1,col:n+1},{row:t,col:n}];default:return[{row:t-1,col:n},{row:t+1,col:n},{row:t,col:n-1},{row:t,col:n+1},{row:t,col:n}]}},h=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),c=1;c<t;c++)r[c-1]=arguments[c];var s=r[1],i=v({row:e,col:s}),o=n.slice(0,u).filter((function(e){return i.some(y(e))})),l=(o.length+(f.some(y({row:e,col:s}))?1:0))%2>0,p="light-square ".concat(l?"active":"inactive");return Object(a.jsx)("div",{className:p})},b=function(e){return o(e)};return Object(a.jsxs)("div",{className:"light-puzzle-container",children:[Object(a.jsx)("div",{className:"light-grid",cols:p,rows:d,children:new Array(d).fill(null).map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1];return Object(a.jsx)("div",{className:"grid-row",children:Array(p).fill(null).map(h.bind(null,r))})}))}),Object(a.jsxs)("div",{className:"controller",children:[Object(a.jsx)(q,{jump:function(){return b(0)},isactive:u>0}),Object(a.jsx)(N,{step:function(){return b(Math.max(u-1,0))},isactive:u>0}),Object(a.jsx)(C,{step:function(){return b(Math.min(u+1,n.length))},isactive:u<n.length}),Object(a.jsx)(S,{jump:function(){return b(n.length)},isactive:u<n.length})]})]})}function y(e){var t=e.row,n=e.col;return function(e){return e.col===n&&e.row===t}}function N(e){var t=e.step,n=e.isactive;return Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"step back nav-button",isactive:n.toString(),children:Object(a.jsx)("path",{d:"M1344 576v896q0 26-19 45t-45 19-45-19l-448-448q-19-19-19-45t19-45l448-448q19-19 45-19t45 19 19 45z"})})}function q(e){var t=e.jump,n=e.isactive;return Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"jump back nav-button",isactive:n.toString(),children:Object(a.jsx)("path",{d:"M1811 269q19-19 32-13t13 32v1472q0  26-13 32t-32-13l-710-710q-8-9-13-19v710q0  26-13 32t-32-13l-710-710q-19-19-19-45t19-45l710-710q19-19  32-13t13 32v710q5-11 13-19z"})})}function C(e){var t=e.step,n=e.isactive;return Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"step forward nav-button",isactive:n.toString(),children:Object(a.jsx)("path",{d:"M1280 1024q0 26-19 45l-448 448q-19 19-45  19t-45-19-19-45v-896q0-26 19-45t45-19 45  19l448 448q19 19 19 45z"})})}function S(e){var t=e.jump,n=e.isactive;return Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2048",height:"2048",viewBox:"0 0 2048 2048",onClick:t,className:"jump forward nav-button",isactive:n.toString(),children:Object(a.jsx)("path",{d:"M237 1779q-19 19-32 13t-13-32v-1472q0-26 13-32t32 13l710  710q8 8 13 19v-710q0-26 13-32t32 13l710 710q19 19 19 45t-19  45l-710 710q-19 19-32 13t-13-32v-710q-5 10-13 19z"})})}var M=n(10);function I(e){var t=e.data,n=Object(c.useRef)(null),s=t.height,i=t.width,u=t.work,o=t.stickWidth,l=t.description,p=t.startingConfiguration,d=Object(c.useCallback)((function(e){e.clearRect(0,0,i,s),e.beginPath(),e.lineWidth=o,e.lineCap="round",e.strokeStyle="#0b032d22";var t,n=Object(M.a)(p);try{for(n.s();!(t=n.n()).done;){var a=Object(r.a)(t.value,2),c=a[0],l=a[1];e.moveTo(c.x,c.y),e.lineTo(l.x,l.y)}}catch(b){n.e(b)}finally{n.f()}e.stroke();var d,f=Object(M.a)(u);try{for(f.s();!(d=f.n()).done;){var j=Object(r.a)(d.value,2),v=j[0],h=j[1];e.beginPath(),e.lineWidth=o,e.strokeStyle="#0b032d",e.moveTo(v.x,v.y),e.lineTo(h.x,h.y),e.stroke()}}catch(b){f.e(b)}finally{f.f()}}),[u,s,i,o,p]);return Object(c.useEffect)((function(){var e=n.current.getContext("2d");d(e)}),[d]),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:l}),Object(a.jsx)("canvas",{id:"mathcstick-canvas",ref:n,height:s,width:i,className:"matchstick"})]})}var T={calcudoku:function(e){return Object(a.jsx)(x,{data:e})},logic:function(e){return Object(a.jsx)(z,{data:e})},light:function(e){return Object(a.jsx)(k,{data:e})},matchstick:function(e){return Object(a.jsx)(I,{data:e})}},A={activepuzzle:!0,puzzleName:"calcudoku",puzzleId:"4x4beginner1"};function P(e){var t=Object(c.useState)(new Map),n=Object(r.a)(t,2),s=n[0],i=n[1],u=Object(c.useState)(new Map),l=Object(r.a)(u,2),j=l[0],v=l[1],h=Object(c.useState)(new Map),b=Object(r.a)(h,2),x=b[0],O=b[1],w=Object(c.useState)(new Map),g=Object(r.a)(w,2),z=g[0],k=g[1],y=Object(c.useMemo)((function(){return e.students.filter((function(e){return e.active}))}),[e.students]);Object(c.useEffect)((function(){v((function(t){var n=new Map(t);return e.students.forEach((function(e){n.has(e)||n.set(e,A)})),n}))}),[e.students,v]);var N=Object(c.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,a,c,s,i,u,o,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first,r=t.last,a=j.get(t),c=a.activepuzzle,s=a.puzzleName,i=a.puzzleId,u=c?"activepuzzle":"".concat(s,"/").concat(i),o="https://immense-everglades-63113.herokuapp.com/api"+"/students/".concat(n,"_").concat(r,"/").concat(u),e.next=6,fetch(o,{headers:{authorization:"testingpw"}});case 6:return l=e.sent,e.next=9,l.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j]),q=Object(c.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,a,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first,r=t.last,a=j.get(t),c=a.puzzleName,s="https://immense-everglades-63113.herokuapp.com/api"+"/students/".concat(n,"_").concat(r,"/").concat(c,"/completed"),e.next=5,fetch(s,{headers:{authorization:"testingpw"}});case 5:return i=e.sent,e.next=8,i.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j]),C=Object(c.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r,a,c,i,u,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.first,a=t.last,c=s.get(t),i=c.puzzleName,u=c.puzzleId,o="https://immense-everglades-63113.herokuapp.com/api"+"/students/".concat(r,"_").concat(a,"/").concat(i,"/").concat(u,"/completed"),fetch(o,{method:"PUT",headers:{"Content-Type":"application/json",authorization:"testingpw"},body:JSON.stringify({completed:n})});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[s]),S=Object(c.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r,a,c,s,i,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first,r=t.last,a="https://immense-everglades-63113.herokuapp.com/api"+"/students/".concat(n,"_").concat(r,"/activepuzzle"),e.next=4,fetch(a,{headers:{authorization:"testingpw"}});case 4:return c=e.sent,e.next=7,c.json();case 7:if(s=e.sent,i=s.puzzleName,u=s.puzzleId,l=Object(m.a)(s,["puzzleName","puzzleId"]),i){e.next=13;break}return e.abrupt("return");case 13:O((function(e){var n=e.get(t)||{},r=n[i]||{},a=r[u]||[];if(!a[0]||JSON.stringify(Object(f.a)({puzzleId:u},l))!==JSON.stringify(a[0].data)){r[u]=[{data:Object(f.a)({puzzleId:u},l),timestamp:Date.now()}].concat(Object(o.a)(a)),n[i]=r;var c=new Map(e);return c.set(t,n),c}return e}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O]),M=Object(c.useCallback)(Object(d.a)(p.a.mark((function e(){var t,n,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Promise.all(y.map(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(t),e.next=3,N(t);case 3:return n=e.sent,e.abrupt("return",[t,n]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),Promise.all(y.map(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:return n=e.sent,e.abrupt("return",[t,n]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))]);case 2:t=e.sent,n=Object(r.a)(t,2),a=n[0],c=n[1],i((function(e){var t=new Map(e);return a.forEach((function(e){return t.set.apply(t,Object(o.a)(e))})),t})),k((function(e){var t=new Map(e);return c.forEach((function(e){return t.set.apply(t,Object(o.a)(e))})),t})),console.log("refreshed");case 9:case"end":return e.stop()}}),e)}))),[y,i,N,S,k,q]);Object(c.useEffect)((function(){M();var e=setInterval(M,2e3);return function(){return clearInterval(e)}}),[M]);var I=function(t,n,r){var a=Object(f.a)({},j.get(t));a[n]=r,"puzzleName"===n&&(a.puzzleId=e.puzzleDirectory[r][0]);var c=new Map(j);c.set(t,a),v(c)},P=function(e){var t=s.get(e)||{},n=t.puzzleName,r=t.completed,c=Object(m.a)(t,["puzzleName","completed"]),i=T[n];return i?Object(a.jsxs)("div",{className:"student-puzzle",children:[i(c),Object(a.jsxs)("div",{className:"completion",children:["Completed:"," ",Object(a.jsx)("span",{className:"completed-check ".concat(r?"complete":"incomplete"),onClick:function(){return C(e,!r)},children:r?"\u2713":"\u25ef"})]})]}):null},E=function(e){var t=x.get(e);if(!t)return null;var n=e.first,r=e.last,c=Object.keys(t).flatMap((function(e){return Object.keys(t[e]).map((function(n){var r=t[e][n][0],a=r.data.puzzleId,c=r.timestamp;return{puzzleName:e,puzzleId:a,timestamp:c}}))})).sort((function(e,t){return e.timestamp>t.timestamp?-1:1}));return Object(a.jsx)("select",{name:"history-select",className:"history-select",id:"history-".concat(n,"-").concat(r),onChange:function(t){var n=JSON.parse(t.target.value),r=n.puzzleName,a=n.puzzleId;I(e,"puzzleName",r),I(e,"puzzleId",a)},children:c.map((function(e){var t=e.puzzleName,n=e.puzzleId,r=e.timestamp,c=new Date(r).toLocaleTimeString();return Object(a.jsxs)("option",{value:JSON.stringify({puzzleName:t,puzzleId:n}),children:[n," ",c]})}))})},J=function(t){var n=e.puzzleDirectory,r=j.get(t).puzzleName,c=s.get(t),i=z.get(t),u=r?n[r]:[];return Object(a.jsxs)("div",{className:"puzzle-select",children:[Object(a.jsx)("select",{name:"type-select",id:"type-select",value:r,onChange:function(e){return I(t,"puzzleName",e.target.value)},children:Object.keys(n).map((function(e){return Object(a.jsx)("option",{value:e,children:e})}))}),Object(a.jsx)("ul",{children:u.map((function(e){var n=!!i&&z.get(t)[e],r=!!c&&c.puzzleId===e;return Object(a.jsxs)("li",{onClick:function(){return I(t,"puzzleId",e)},className:r?"active":"",children:[Object(a.jsx)("span",{className:"completed-check ".concat(n?"complete":"incomplete"),onClick:function(){return C(t,!n)},children:n?"\u2713":"\u25cb "}),e]})}))})]})},_=function(e){var t=x.get(e)||{};return Object.keys(t).some((function(e){return Object.keys(t[e]).some((function(n){var r=t[e][n][0].timestamp;return Date.now()-r<6e4}))}))};return Object(a.jsx)("ul",{className:"puzzle-display",children:y.map((function(e){var t=e.first,n=e.last,r=j.get(e),c=r?r.activepuzzle:null;return Object(a.jsxs)("li",{className:"student-display",children:[Object(a.jsxs)("div",{className:"student-header",children:[Object(a.jsxs)("div",{className:"student-name",children:[D(t)," ",D(n)]}),Object(a.jsx)("div",{className:"activity-indicator",children:_(e)?null:"Inactive"}),E(e),Object(a.jsxs)("div",{className:"show-active",children:["Show Active Puzzle:",Object(a.jsx)("input",{type:"checkbox",name:"active",id:"".concat(t,"_").concat(n,"-active"),checked:!!c,onChange:function(){return I(e,"activepuzzle",!c)}})]})]}),J(e),P(e)]},"".concat(t,"_").concat(n))}))})}function D(e){return e.replace(/^./,(function(e){return e.toUpperCase()}))}n(19);var E={calcudoku:["4x4beginner1","4x4beginner2","4x4beginner3","4x4beginner4","4x4beginner5","4x4intermediate1","4x4intermediate2","4x4intermediate3","4x4intermediate4","4x4expert1","4x4expert2","4x4expert3","5x5beginner1","5x5beginner2","5x5intermediate1"],logic:["wolfgoatcabbage","torch","goldboxes","10coins","socks","childrenboat","applesandoranges","averybobbycam","bear","hats"],light:["small","medium","large","smallx","mediumx","largex"].flatMap((function(e){return Array.from({length:5},(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[1];return"".concat(e).concat(a+1)}))})),matchstick:["fish","donkey","squares1","squares2","squares3","squares4","squares5"]};function J(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(j,{students:n,setStudents:s}),Object(a.jsx)(P,{students:n,puzzleDirectory:E})]})}u.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(J,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.92df3ff1.chunk.js.map