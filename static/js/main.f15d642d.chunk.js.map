{"version":3,"sources":["student-list.js","templates/calcudoku.js","templates/logic.js","puzzle-display.js","index.js"],"names":["StudentList","props","students","useState","displayedStudents","setDisplayedStudents","className","RefreshButton","type","placeholder","onChange","event","query","target","value","split","filteredStudents","filter","first","last","every","pattern","regexp","RegExp","match","map","renderStudent","bind","setStudents","fetchStudentList","a","listurl","process","fetch","headers","authorization","response","ok","json","list","student","find","console","log","status","onClick","active","capitalize","name","id","defaultChecked","string","replace","char","toUpperCase","Calcudoku","data","size","grid","puzzleData","cages","work","Array","fill","index","col","Math","floor","row","matchSquare","squareMatcher","entry","cage","squares","neighbors","neighborList","isTopLeft","square","result","operation","generateGrid","renderSquare","classList","join","disabled","directions","dir","push","Logic","description","puzzleComponents","calcudoku","logic","fetchDefaults","activepuzzle","puzzleName","puzzleId","PuzzleDisplay","Map","setPuzzleData","fetchInfo","setFetchInfo","activeStudents","useMemo","useEffect","oldFetchInfo","newFetchInfo","forEach","has","set","fetchStudentPuzzleData","useCallback","get","puzzleuri","url","Promise","all","dataUpdates","oldPuzzleData","newPuzzleData","setStudentFetchInfo","key","info","puzzleDirectory","renderStudentPuzzle","render","renderPuzzleSelect","directory","ids","e","Object","keys","puzzleInfo","checked","App","setPuzzleDirectory","instanceListUrl","instance","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f15d642d.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nexport default function StudentList(props) {\n\tconst { students } = props;\n\tconst [displayedStudents, setDisplayedStudents] = useState(students);\n\tconst filter = (event) => {\n\t\tconst query = event.target.value.split(\" \");\n\t\tconst filteredStudents = students.filter(({ first, last }) =>\n\t\t\tquery.every((pattern) => {\n\t\t\t\tconst regexp = new RegExp(pattern, \"i\");\n\t\t\t\treturn first.match(regexp) || last.match(regexp);\n\t\t\t})\n\t\t);\n\t\tsetDisplayedStudents(filteredStudents);\n\t};\n\treturn (\n\t\t<div className=\"student-list-container\">\n\t\t\t<RefreshButton\n\t\t\t\t{...props}\n\t\t\t\tsetDisplayedStudents={setDisplayedStudents}\n\t\t\t/>\n\t\t\t<input type=\"text\" placeholder=\"Filter\" onChange={filter} />\n\t\t\t<ul className=\"student-list\">\n\t\t\t\t{displayedStudents.map(renderStudent.bind(null, props))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}\n\nfunction RefreshButton({ students, setStudents, setDisplayedStudents }) {\n\tconst fetchStudentList = async () => {\n\t\tconst listurl = `${process.env.REACT_APP_API_URL}/students`;\n\t\tconst response = await fetch(listurl, {\n\t\t\theaders: { authorization: process.env.REACT_APP_INSTRUCTOR_PW },\n\t\t});\n\t\tif (response.ok) {\n\t\t\ttry {\n\t\t\t\tlet list = (await response.json()).map((student) => {\n\t\t\t\t\tconst studentMatch = students.find(\n\t\t\t\t\t\t({ first, last }) =>\n\t\t\t\t\t\t\tfirst === student.first && last === student.last\n\t\t\t\t\t);\n\t\t\t\t\treturn studentMatch || student;\n\t\t\t\t});\n\t\t\t\tsetStudents(list);\n\t\t\t\tsetDisplayedStudents(list);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t} else console.log(\"HTTP error, status = \" + response.status);\n\t};\n\treturn (\n\t\t<button className=\"refresh-students\" onClick={fetchStudentList}>\n\t\t\tRefresh\n\t\t</button>\n\t);\n}\n\nfunction renderStudent({ students, setStudents }, student) {\n\tconst { first, last, active } = student;\n\treturn (\n\t\t<li key={`${first} ${last}`}>\n\t\t\t{capitalize(first)} {capitalize(last)}{\" \"}\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tname=\"active\"\n\t\t\t\tid={`${first}_${last}-active`}\n\t\t\t\tdefaultChecked={active ? true : false}\n\t\t\t\tonChange={() => {\n\t\t\t\t\tstudent.active = !active;\n\t\t\t\t\tsetStudents([...students]);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</li>\n\t);\n}\n\nfunction capitalize(string) {\n\treturn string.replace(/^./, (char) => char.toUpperCase());\n}\n","import React from \"react\";\n\nexport default function Calcudoku({ data }) {\n\tconst { size } = data;\n\tconst grid = generateGrid(data);\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"puzzle-container\" size={size}>\n\t\t\t\t<div className=\"grid-container\" size={size}>\n\t\t\t\t\t{grid.map(renderSquare)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction renderSquare(square) {\n\tconst classList = \"calcudoku-square \" + square.neighbors.join(\" \");\n\treturn (\n\t\t<div className={classList}>\n\t\t\t<div className=\"cage-indicator\">\n\t\t\t\t{square.result}\n\t\t\t\t{square.operation}\n\t\t\t</div>\n\t\t\t<input type=\"number\" value={square.value || \"\"} disabled />\n\t\t</div>\n\t);\n}\n\nfunction generateGrid(puzzleData) {\n\tconst { size, cages, work } = puzzleData;\n\tconst squares = Array(size ** 2).fill(null);\n\treturn squares.map((...[, index]) => {\n\t\tconst col = Math.floor(index / size);\n\t\tconst row = index % size;\n\t\tconst matchSquare = squareMatcher({ col, row });\n\t\tconst entry = work.find(matchSquare);\n\t\tconst cage = cages.find((cage) => cage.squares.find(matchSquare));\n\t\tconst neighbors = neighborList({ col, row }, cage);\n\t\tconst isTopLeft = cage.squares.every(\n\t\t\t(square) =>\n\t\t\t\tsquare.col >= col && (square.row >= row || square.col > col)\n\t\t);\n\t\tconst result = isTopLeft ? cage.result : null;\n\t\tconst operation = isTopLeft ? cage.operation : null;\n\t\tconst value = entry ? entry.value : null;\n\t\treturn { col, row, value, neighbors, result, operation };\n\t});\n}\n\nfunction neighborList(square, cage) {\n\tconst neighbors = [];\n\tconst directions = {\n\t\t\"n-up\": { col: square.col - 1, row: square.row },\n\t\t\"n-down\": { col: square.col + 1, row: square.row },\n\t\t\"n-left\": { col: square.col, row: square.row - 1 },\n\t\t\"n-right\": { col: square.col, row: square.row + 1 },\n\t};\n\n\tfor (let dir in directions) {\n\t\tconst matchSquare = squareMatcher(directions[dir]);\n\t\tif (cage.squares.find(matchSquare)) {\n\t\t\tneighbors.push(dir);\n\t\t}\n\t}\n\n\treturn neighbors;\n}\n\nfunction squareMatcher({ col, row }) {\n\treturn (square) => square.col === col && square.row === row;\n}\n","import React from \"react\";\n\nexport default function Logic({ data: { description, work } }) {\n\treturn (\n\t\t<div>\n\t\t\t<p className=\"puzzle-description\">{description}</p>\n\t\t\t<textarea className=\"work\" disabled>\n\t\t\t\t{work}\n\t\t\t</textarea>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\n\nimport Calcudoku from \"./templates/calcudoku\";\nimport Logic from \"./templates/logic\";\n\nconst puzzleComponents = {\n\tcalcudoku: (data) => <Calcudoku data={data} />,\n      \tlogic: (data) => <Logic data={data} />,\n};\n\nconst fetchDefaults = {\n\tactivepuzzle: true,\n\tpuzzleName: \"calcudoku\",\n\tpuzzleId: \"4x4beginner1\",\n};\n\nexport default function PuzzleDisplay(props) {\n\tconst [puzzleData, setPuzzleData] = useState(new Map());\n\tconst [fetchInfo, setFetchInfo] = useState(new Map());\n\tconst activeStudents = useMemo(\n\t\t() => props.students.filter((student) => student.active),\n\t\t[props.students]\n\t);\n\n\t//set defaults for newly fetched students\n\tuseEffect(() => {\n\t\tsetFetchInfo((oldFetchInfo) => {\n\t\t\tconst newFetchInfo = new Map(oldFetchInfo);\n\t\t\tprops.students.forEach((student) => {\n\t\t\t\tif (!newFetchInfo.has(student))\n\t\t\t\t\tnewFetchInfo.set(student, fetchDefaults);\n\t\t\t});\n\t\t\treturn newFetchInfo;\n\t\t});\n\t}, [props.students, setFetchInfo]);\n\n\tconst fetchStudentPuzzleData = useCallback(\n\t\tasync (student) => {\n\t\t\tconst { first, last } = student;\n\t\t\tconst { activepuzzle, puzzleName, puzzleId } = fetchInfo.get(\n\t\t\t\tstudent\n\t\t\t);\n\t\t\tconst puzzleuri = activepuzzle\n\t\t\t\t? \"activepuzzle\"\n\t\t\t\t: `${puzzleName}/${puzzleId}`;\n\t\t\tconst url =\n\t\t\t\tprocess.env.REACT_APP_API_URL +\n\t\t\t\t`/students/${first}_${last}/${puzzleuri}`;\n\t\t\tconst response = await fetch(url, {\n\t\t\t\theaders: { authorization: process.env.REACT_APP_INSTRUCTOR_PW },\n\t\t\t});\n\t\t\treturn await response.json();\n\t\t},\n\t\t[fetchInfo]\n\t);\n\n\t//refresh puzzle data\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst dataUpdates = await Promise.all(\n\t\t\t\tactiveStudents.map(async (student) => {\n\t\t\t\t\tconst data = await fetchStudentPuzzleData(student);\n\t\t\t\t\treturn [student, data];\n\t\t\t\t})\n\t\t\t);\n\t\t\tsetPuzzleData((oldPuzzleData) => {\n\t\t\t\tconst newPuzzleData = new Map(oldPuzzleData);\n\t\t\t\tdataUpdates.forEach((data) => newPuzzleData.set(...data));\n\t\t\t\treturn newPuzzleData;\n\t\t\t});\n\t\t\tconsole.log(\"refreshed\");\n\t\t})();\n\t}, [activeStudents, setPuzzleData, fetchStudentPuzzleData]);\n\n\tconst setStudentFetchInfo = (student, key, value) => {\n\t\tconst info = { ...fetchInfo.get(student) };\n\t\tinfo[key] = value;\n\t\tif(key===\"puzzleName\"){\n\t\t\tinfo.puzzleId = props.puzzleDirectory[value][0];\n\t\t}\n\t\tconst newFetchInfo = new Map(fetchInfo);\n\t\tnewFetchInfo.set(student, info);\n\t\tsetFetchInfo(newFetchInfo);\n\t};\n\n\tconst renderStudentPuzzle = (student) => {\n\t\tconst { puzzleName, ...data } = puzzleData.get(student) || {};\n\t\tconst render = puzzleComponents[puzzleName];\n\t\treturn render ? render(data) : null;\n\t};\n\n\tconst renderPuzzleSelect = (student) => {\n\t\tconst directory = props.puzzleDirectory;\n\t\tconst { puzzleName, puzzleId } = fetchInfo.get(student);\n\t\tconst ids = puzzleName ? directory[puzzleName] : [];\n\t\treturn (\n\t\t\t<div className=\"puzzle-select\">\n\t\t\t\t<select\n\t\t\t\t\tname=\"type-select\"\n\t\t\t\t\tid=\"type-select\"\n\t\t\t\t\tvalue={puzzleName}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tsetStudentFetchInfo(\n\t\t\t\t\t\t\tstudent,\n\t\t\t\t\t\t\t\"puzzleName\",\n\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{Object.keys(directory).map((type) => (\n\t\t\t\t\t\t<option value={type}>{type}</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t\t<select\n\t\t\t\t\tname=\"instance-select\"\n\t\t\t\t\tid=\"instance-select\"\n\t\t\t\t\tvalue={puzzleId}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tsetStudentFetchInfo(student, \"puzzleId\", e.target.value)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ids.map((id) => (\n\t\t\t\t\t\t<option value={id}>{id}</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst renderStudentDisplay = (student) => {\n\t\tconst { first, last } = student;\n\t\tconst puzzleInfo = fetchInfo.get(student);\n\t\tconst activepuzzle = puzzleInfo ? puzzleInfo.activepuzzle : null;\n\t\treturn (\n\t\t\t<li key={`${first}_${last}`}>\n\t\t\t\t<div className=\"student-header\">\n\t\t\t\t\t<span className=\"student-name\">\n\t\t\t\t\t\t{capitalize(first)} {capitalize(last)}\n\t\t\t\t\t</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"active\"\n\t\t\t\t\t\tid={`${first}_${last}-active`}\n\t\t\t\t\t\tchecked={activepuzzle ? true : false}\n\t\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\t\tsetStudentFetchInfo(\n\t\t\t\t\t\t\t\tstudent,\n\t\t\t\t\t\t\t\t\"activepuzzle\",\n\t\t\t\t\t\t\t\t!activepuzzle\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{!activepuzzle ? renderPuzzleSelect(student) : null}\n\t\t\t\t</div>\n\t\t\t\t{renderStudentPuzzle(student)}\n\t\t\t</li>\n\t\t);\n\t};\n\n\treturn (\n\t\t<ul className=\"puzzle-display\">\n\t\t\t{activeStudents.map(renderStudentDisplay)}\n\t\t</ul>\n\t);\n}\n\nfunction capitalize(string) {\n\treturn string.replace(/^./, (char) => char.toUpperCase());\n}\n","import React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport StudentList from \"./student-list\";\nimport PuzzleDisplay from \"./puzzle-display\";\n\nimport \"./stylesheets/index.css\";\n\nfunction App() {\n\tconst [students, setStudents] = useState([]);\n\tconst [puzzleDirectory, setPuzzleDirectory] = useState({\n\t\tcalcudoku: [],\n\t\tlogic: [],\n\t});\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tawait Promise.all(\n\t\t\t\t\tObject.keys(puzzleDirectory).map(async (puzzleName) => {\n\t\t\t\t\t\tconst instanceListUrl = `${process.env.REACT_APP_API_URL}/puzzles/${puzzleName}`;\n\t\t\t\t\t\tconst response = await fetch(instanceListUrl, {\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\tauthorization:\n\t\t\t\t\t\t\t\t\tprocess.env.REACT_APP_INSTRUCTOR_PW,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\t\tpuzzleDirectory[puzzleName] = (\n\t\t\t\t\t\t\t\tawait response.json()\n\t\t\t\t\t\t\t).map(({ instance }) => instance);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(`Http error: ${response.status}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tsetPuzzleDirectory({ ...puzzleDirectory });\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t})();\n\t}, []);\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<StudentList students={students} setStudents={setStudents} />\n\t\t\t<PuzzleDisplay\n\t\t\t\tstudents={students}\n\t\t\t\tpuzzleDirectory={puzzleDirectory}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\n//---------\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}